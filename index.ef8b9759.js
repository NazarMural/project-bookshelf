function o(o){return o&&o.__esModule?o.default:o}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},s={},n=t.parcelRequire0a78;null==n&&((n=function(o){if(o in e)return e[o].exports;if(o in s){var t=s[o];delete s[o];var n={id:o,exports:{}};return e[o]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(o,t){s[o]=t},t.parcelRequire0a78=n),n("kyEFX").register(JSON.parse('{"5ZPII":"index.ef8b9759.js","auE1R":"amazonLogo.65e47238.png","8kXNz":"bookLogo.22ccf33c.png","hSDsI":"bookShopLogo.082e3bff.png","5UbS1":"index.e29a7d47.css","7wQtW":"index.c3a3aba0.js"}'));async function a(o){const t=await fetch(`https://books-backend.p.goit.global/books/${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}async function c(o){const t=await fetch(`https://books-backend.p.goit.global/books/category?category=${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}var i=n("7Y9D8");function r(){o(i).Loading.hourglass({clickToClose:!0,svgColor:"#4F2EE8"})}function l(){o(i).Loading.remove()}function d(){document.getElementById("category-section").scrollIntoView({behavior:"smooth",block:"start"})}const u=document.querySelector(".list-categories"),b=document.querySelector(".books-cards__list");function g(){const o=document.querySelector(".books-cards__title");o&&o.remove(),function(){document.querySelectorAll(".category__link").forEach((o=>{o.classList.remove("current-category")}));const o=document.querySelector(".category__link-all");o.classList.contains("current-category")&&o.classList.remove("current-category")}(),b.innerHTML=""}function k(o){const t=o.split(" "),e=t.pop(t[t.length-1]),s=`<h1 class="books-cards__title">${t.join(" ")}\n        <span class="books-cards__title-accent"> ${e}</span></h1>`;b.insertAdjacentHTML("beforebegin",s)}function _(o){const t=o.map((o=>{const{_id:t,book_image:e,title:s,author:n}=o;return`\n    <li data-id="${t}" class="category-books__item">\n    <a href="" class="category-books__link">\n    <div class="category-books__img-thumb">\n    <img src="${e}" alt="${s}" class="category-books__img">\n    <p class="card-overlay">Quick view</p>\n    </div>\n    <h2 class="category-books__title">${s}</h2>\n    <p class="category-books__author">${n}</p>\n    </a>\n    </li>`})).join("");b.insertAdjacentHTML("beforeend",t)}u.addEventListener("click",(async function(o){b.classList.remove("top-books-list"),b.classList.add("category-books-list"),o.preventDefault(),o.target.classList.contains("category__link-all")&&(g(),o.target.classList.add("current-category"),y(),d());if(o.target.classList.contains("category__link")){r(),g();const t=o.target.textContent;o.target.classList.add("current-category"),k(t);_(await c(t)),l(),d()}}));function m(){window.scrollTo({top:0,behavior:"smooth"})}function p(o){const t=document.querySelectorAll(".js-cat-link");console.log(t),[...t].forEach((t=>{t.textContent===o?t.classList.add("current-category"):t.classList.contains("current-category")&&t.classList.remove("current-category")}))}({btnToTop:document.querySelector(".button-up")}).btnToTop.addEventListener("click",(()=>{m()}));const f={booksCardsList:document.querySelector(".books-cards__list"),booksCardsTitle:null,topBooksCategories:null,booksCardsButton:null};function y(){r(),a("top-books").then((o=>{console.log(f.booksCardsList),f.booksCardsList.classList.remove("category-books-list"),f.booksCardsList.classList.add("top-books-list"),f.booksCardsList.innerHTML="",k("Best Sellers Books"),function(o){const t=o.map((({list_name:o})=>`\n    <li class="top-books__item">\n    <h2 class="top-books-title">${o}</h2>\n    <ul class="top-books-categories__list">\n                \n    </ul>\n    <div class="top-books__button-box">\n    <button class="top-books__button" data-list_name="${o}">See More</button>\n    </div>\n    </li>\n    `)).join("");f.booksCardsList.insertAdjacentHTML("beforeend",t)}(o),f.topBooksCategories=document.querySelectorAll(".top-books-categories__list"),f.booksCardsButton=document.querySelector(".top-books__button"),function(o){let t=0;console.log(o[t].books),f.topBooksCategories.forEach((e=>{const s=o[t].books.map((({_id:o,book_image:t,title:e,author:s})=>`\n          <li data-id="${o}" class="category-books__item is-hidden-books">\n          <a href="" class="category-books__link">\n          <div class="category-books__img-thumb">\n          <img src="${t}" alt="${e}" class="category-books__img">\n          <p class="card-overlay">Quick view</p>\n          </div>\n          <h2 class="category-books__title">${e}</h2>\n          <p class="category-books__author">${s}</p>\n          </a>\n          </li>`)).join("");e.insertAdjacentHTML("beforeend",s),t++}))}(o),l()})).catch((()=>{console.log("Проблема з запитом!")}))}f.booksCardsList.addEventListener("click",(async function(o){if(o.preventDefault(),!o.target.classList.contains("top-books__button"))return void console.log("Ти натиснув не на кнопку.");console.log("Ти натиснув на кнопку."),f.booksCardsList.classList.remove("top-books-list"),f.booksCardsList.classList.add("category-books-list");const t=o.target.dataset.list_name;console.log(t),f.booksCardsTitle=document.querySelector(".books-cards__title"),f.booksCardsTitle.remove(),p(t),k(t),f.booksCardsList.innerHTML="",r();const e=await c(t);l(),m(),_(e)})),y();const h=document.querySelector(".list-categories");h.insertAdjacentHTML("afterbegin",'<li><a href="#category-title" class="js-cat-link category__link-all current-category">All category</a></li>'),async function(){const o=await a("category-list"),t=[];for(const{list_name:e}of o)t.push(e);console.log(t);const e=t.sort(((o,t)=>o.localeCompare(t))).map((o=>`<li class="category__item"><a href="#category-title" class="js-cat-link category__link">${o}</a></li>`)).join("");h.insertAdjacentHTML("beforeend",e)}(),n("dTazW");var L,v=n("d2gfz");L=new URL(n("kyEFX").resolve("auE1R"),import.meta.url).toString();var w;w=new URL(n("kyEFX").resolve("8kXNz"),import.meta.url).toString();var S;S=new URL(n("kyEFX").resolve("hSDsI"),import.meta.url).toString();const E=document.querySelector(".books-cards__list"),$=document.querySelector(".backdrop"),C=document.querySelector(".close-btn"),T=document.querySelector(".book-container"),H=document.querySelector(".modal__btn"),q=document.querySelector(".modal-book-btn__signUp"),A=document.querySelector(".information-about-status");function j(){$.classList.add("backdrop--hidden"),T.innerHTML=""}E.addEventListener("click",(async function(t){let e=!0;if("DIV"===t.target.nodeName||"P"===t.target.nodeName||"H2"===t.target.nodeName||"A"===t.target.nodeName){T.innerHTML="",C.addEventListener("click",j);const s=t.target.closest(".category-books__item").dataset.id;$.classList.remove("backdrop--hidden");const n=await a(s);console.log(n.buy_links),T.insertAdjacentHTML("beforeend",function({_id:t,book_image:e,buy_links:[{name:s,url:n},{name:a,url:c},{name:i,url:r}],title:l,description:d,author:u}){const b=`<img src="${e}" alt="${l}"  class="book-cover"/>\n  <div class="text-container"><h2 class="book-cover__title">${l}</h2>\n  <p class="book-cover__author">${u}</p>\n  <p class="book-cover__description">${d||"No description"}</p>\n  <ul class="store-icons">\n  <li class="store-icons__item">\n    <a href="${n}"\n      ><img\n        src="${o(L)}"\n        alt="${s}"\n        width="62"\n        height="19"\n        class="store-icon"\n        target="_blank" \n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="${c}" target="_blank" \n      ><img\n        src="${o(w)}"\n        alt="${a}"\n        width="33"\n        height="32"\n        class="store-icon"\n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="${r}"\n    target="_blank"><img\n        src="${o(S)}"\n        alt="${i}"\n        width="38"\n        height="36"\n        class="store-icon"\n    /></a>\n  </li>\n</ul>\n  </div>`;return H.dataset.id=`${t}`,b}(n));const c=await(0,v.getBook)();if(null!==c)for(let o=0;o<c.length;o++)if(c[o]._id===s){e=!1;break}e?(H.textContent="Add to shopping list",A.classList.add("is-hidden")):(H.textContent="Remove from the shopping list",A.classList.remove("is-hidden"))}})),q.addEventListener("click",v.openSignUpFunc),H.addEventListener("click",(async function(o){let t=!0;const e=await(0,v.getBook)(),s=H.dataset.id,n=await a(s);if(null!==e)for(let o=0;o<e.length;o++)if(e[o]._id===s){t=!1;break}t?((0,v.postBook)(n),H.textContent="Remove from the shopping list",A.classList.remove("is-hidden")):((0,v.deleteBook)(s),H.textContent="Add to shopping list",A.classList.add("is-hidden"))})),$.addEventListener("click",(function(o){o.target.classList.contains("backdrop")&&$.classList.add("backdrop--hidden")})),window.addEventListener("keydown",(function({code:o}){"Escape"===o&&$.classList.add("backdrop--hidden")})),n("d2gfz"),n("4QsFx"),n("hgxEb"),n("baGT8");
//# sourceMappingURL=index.ef8b9759.js.map
