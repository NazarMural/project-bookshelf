!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},s=e.parcelRequire0a78;null==s&&((s=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var s={id:t,exports:{}};return n[t]=s,e.call(s.exports,s,s.exports),s.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},e.parcelRequire0a78=s),s("iE7OH").register(JSON.parse('{"EVgbq":"index.8ead24c2.js","cX5t3":"amazonLogo.65e47238.png","2t6si":"bookLogo.22ccf33c.png","idSWj":"bookShopLogo.082e3bff.png","5UbS1":"index.89ca71fa.css","1bhX6":"index.9a4d4a65.js"}'));var r=s("bpxeT"),a=s("2TvXO"),c=(r=s("bpxeT"),a=s("2TvXO"),"https://books-backend.p.goit.global/books/");function i(t){return l.apply(this,arguments)}function l(){return(l=t(r)(t(a).mark((function e(n){var o,s;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(c).concat(n));case 2:if((o=t.sent).ok){t.next=5;break}throw new Error(o.status);case 5:return t.next=7,o.json();case 7:return s=t.sent,t.abrupt("return",s);case 9:case"end":return t.stop()}}),e)})))).apply(this,arguments)}r=s("bpxeT"),a=s("2TvXO");var u="https://books-backend.p.goit.global/books/category?category=";function d(t){return p.apply(this,arguments)}function p(){return(p=t(r)(t(a).mark((function e(n){var o,s;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(u).concat(n));case 2:if((o=t.sent).ok){t.next=5;break}throw new Error(o.status);case 5:return t.next=7,o.json();case 7:return s=t.sent,t.abrupt("return",s);case 9:case"end":return t.stop()}}),e)})))).apply(this,arguments)}r=s("bpxeT"),a=s("2TvXO");var b=s("6JpON");function k(){t(b).Loading.hourglass({clickToClose:!0,svgColor:"#4F2EE8"})}function g(){t(b).Loading.remove()}function f(){document.getElementById("category-section").scrollIntoView({behavior:"smooth",block:"start"})}var _=document.querySelector(".list-categories"),v=document.querySelector(".books-cards__list");function h(){return(h=t(r)(t(a).mark((function e(n){var o;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v.classList.remove("top-books-list"),v.classList.add("category-books-list"),n.preventDefault(),n.target.classList.contains("category__link-all")&&(m(),n.target.classList.add("current-category"),T(),f()),!n.target.classList.contains("category__link")){t.next=16;break}return k(),m(),o=n.target.textContent,n.target.classList.add("current-category"),y(o),t.next=12,d(o);case 12:L(t.sent),g(),f();case 16:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function m(){var t=document.querySelector(".books-cards__title");t&&t.remove(),function(){document.querySelectorAll(".category__link").forEach((function(t){t.classList.remove("current-category")}));var t=document.querySelector(".category__link-all");t.classList.contains("current-category")&&t.classList.remove("current-category")}(),v.innerHTML=""}function y(t){var e=t.split(" "),n=e.pop(e[e.length-1]),o='<h1 class="books-cards__title">'.concat(e.join(" "),'\n        <span class="books-cards__title-accent"> ').concat(n,"</span></h1>");v.insertAdjacentHTML("beforebegin",o)}function L(t){var e=t.map((function(t){var e=t._id,n=t.book_image,o=t.title,s=t.author;return'\n    <li data-id="'.concat(e,'" class="category-books__item">\n    <a href="" class="category-books__link">\n    <div class="category-books__img-thumb">\n    <img src="').concat(n,'" alt="').concat(o,'" class="category-books__img">\n    <p class="card-overlay">Quick view</p>\n    </div>\n    <h2 class="category-books__title">').concat(o,'</h2>\n    <p class="category-books__author">').concat(s,"</p>\n    </a>\n    </li>")})).join("");v.insertAdjacentHTML("beforeend",e)}function x(){window.scrollTo({top:0,behavior:"smooth"})}_.addEventListener("click",(function(t){return h.apply(this,arguments)})),{btnToTop:document.querySelector(".button-up")}.btnToTop.addEventListener("click",(function(){x()}));var E=s("8nrFW");function w(e){var n=document.querySelectorAll(".js-cat-link");console.log(n),t(E)(n).forEach((function(t){t.textContent===e?t.classList.add("current-category"):t.classList.contains("current-category")&&t.classList.remove("current-category")}))}var C={booksCardsList:document.querySelector(".books-cards__list"),booksCardsTitle:null,topBooksCategories:null,booksCardsButton:null};function T(){k(),i("top-books").then((function(t){var e;console.log(C.booksCardsList),C.booksCardsList.classList.remove("category-books-list"),C.booksCardsList.classList.add("top-books-list"),C.booksCardsList.innerHTML="",y("Best Sellers Books"),e=t.map((function(t){var e=t.list_name;return'\n    <li class="top-books__item">\n    <h2 class="top-books-title">'.concat(e,'</h2>\n    <ul class="top-books-categories__list">\n                \n    </ul>\n    <div class="top-books__button-box">\n    <button class="top-books__button" data-list_name="').concat(e,'">See More</button>\n    </div>\n    </li>\n    ')})).join(""),C.booksCardsList.insertAdjacentHTML("beforeend",e),C.topBooksCategories=document.querySelectorAll(".top-books-categories__list"),C.booksCardsButton=document.querySelector(".top-books__button"),function(t){var e=0;console.log(t[e].books),C.topBooksCategories.forEach((function(n){var o=t[e].books.map((function(t){var e=t._id,n=t.book_image,o=t.title,s=t.author;return'\n          <li data-id="'.concat(e,'" class="category-books__item is-hidden-books">\n          <a href="" class="category-books__link">\n          <div class="category-books__img-thumb">\n          <img src="').concat(n,'" alt="').concat(o,'" class="category-books__img">\n          <p class="card-overlay">Quick view</p>\n          </div>\n          <h2 class="category-books__title">').concat(o,'</h2>\n          <p class="category-books__author">').concat(s,"</p>\n          </a>\n          </li>")})).join("");n.insertAdjacentHTML("beforeend",o),e++}))}(t),g()})).catch((function(){console.log("Проблема з запитом!")}))}function S(){return(S=t(r)(t(a).mark((function e(n){var o,s;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),n.target.classList.contains("top-books__button")){t.next=4;break}return console.log("Ти натиснув не на кнопку."),t.abrupt("return");case 4:return console.log("Ти натиснув на кнопку."),C.booksCardsList.classList.remove("top-books-list"),C.booksCardsList.classList.add("category-books-list"),o=n.target.dataset.list_name,console.log(o),C.booksCardsTitle=document.querySelector(".books-cards__title"),C.booksCardsTitle.remove(),w(o),y(o),C.booksCardsList.innerHTML="",k(),t.next=17,d(o);case 17:s=t.sent,g(),x(),L(s);case 21:case"end":return t.stop()}}),e)})))).apply(this,arguments)}C.booksCardsList.addEventListener("click",(function(t){return S.apply(this,arguments)})),T();r=s("bpxeT"),a=s("2TvXO");var H=document.querySelector(".list-categories");function q(){return(q=t(r)(t(a).mark((function e(){var n,o,s,r,c,l,u,d,p;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i("category-list");case 2:for(n=t.sent,o=[],s=!0,r=!1,c=void 0,t.prev=5,l=n[Symbol.iterator]();!(s=(u=l.next()).done);s=!0)d=u.value.list_name,o.push(d);t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),r=!0,c=t.t0;case 13:t.prev=13,t.prev=14,s||null==l.return||l.return();case 16:if(t.prev=16,!r){t.next=19;break}throw c;case 19:return t.finish(16);case 20:return t.finish(13);case 21:console.log(o),p=o.sort((function(t,e){return t.localeCompare(e)})).map((function(t){return'<li class="category__item"><a href="#category-title" class="js-cat-link category__link">'.concat(t,"</a></li>")})).join(""),H.insertAdjacentHTML("beforeend",p);case 24:case"end":return t.stop()}}),e,null,[[5,9,13,21],[14,,16,20]])})))).apply(this,arguments)}H.insertAdjacentHTML("afterbegin",'<li><a href="#category-title" class="js-cat-link category__link-all current-category">All category</a></li>'),function(){q.apply(this,arguments)}(),s("xpKCW");r=s("bpxeT");var j,A=s("1t1Wn"),B=(a=s("2TvXO"),s("95ECi"));j=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("cX5t3");var O;O=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("2t6si");var M;M=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("idSWj");var R=document.querySelector(".books-cards__list"),N=document.querySelector(".backdrop"),F=document.querySelector(".close-btn"),X=document.querySelector(".book-container"),U=document.querySelector(".modal__btn"),V=document.querySelector(".modal-book-btn__signUp"),D=document.querySelector(".information-about-status"),J=document.body;function W(){return(W=t(r)(t(a).mark((function e(n){var o,s,r,c,l,u;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!0,"DIV"!==n.target.nodeName&&"P"!==n.target.nodeName&&"H2"!==n.target.nodeName&&"A"!==n.target.nodeName){t.next=26;break}return X.innerHTML="",F.addEventListener("click",z),s=n.target.closest(".category-books__item"),r=s.dataset.id,N.classList.remove("backdrop--hidden"),J.classList.add("modal-open"),t.next=10,i(r);case 10:return c=t.sent,console.log(c.buy_links),X.insertAdjacentHTML("beforeend",K(c)),t.next=15,(0,B.getBook)();case 15:if(null===(l=t.sent)){t.next=25;break}u=0;case 18:if(!(u<l.length)){t.next=25;break}if(l[u]._id!==r){t.next=22;break}return o=!1,t.abrupt("break",25);case 22:u++,t.next=18;break;case 25:o?(U.textContent="Add to shopping list",D.classList.add("is-hidden")):(U.textContent="Remove from the shopping list",D.classList.remove("is-hidden"));case 26:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=t(r)(t(a).mark((function e(n){var o,s,r,c,l;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=!0,t.next=3,(0,B.getBook)();case 3:return s=t.sent,r=U.dataset.id,t.next=7,i(r);case 7:if(c=t.sent,null===s){t.next=17;break}l=0;case 10:if(!(l<s.length)){t.next=17;break}if(s[l]._id!==r){t.next=14;break}return o=!1,t.abrupt("break",17);case 14:l++,t.next=10;break;case 17:o?((0,B.postBook)(c),U.textContent="Remove from the shopping list",D.classList.remove("is-hidden")):((0,B.deleteBook)(r),U.textContent="Add to shopping list",D.classList.add("is-hidden"));case 18:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function z(){N.classList.add("backdrop--hidden"),J.classList.remove("modal-open")}function K(e){var n=e._id,o=e.book_image,s=t(A)(e.buy_links,3),r=s[0],a=r.name,c=r.url,i=s[1],l=i.name,u=i.url,d=s[2],p=d.name,b=d.url,k=e.title,g=e.description,f=e.author,_='<img src="'.concat(o,'" alt="').concat(k,'"  class="book-cover"/>\n  <div class="text-container"><h2 class="book-cover__title">').concat(k,'</h2>\n  <p class="book-cover__author">').concat(f,'</p>\n  <p class="book-cover__description">').concat(g||"No description",'</p>\n  <ul class="store-icons">\n  <li class="store-icons__item">\n    <a href="').concat(c,'"\n      class="icon-link"><img\n        src="').concat(t(j),'"\n        alt="').concat(a,'"\n        width="62"\n        height="19"\n        class="store-icon--amazon"\n        target="_blank" \n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="').concat(u,'" target="_blank" \n    class="icon-link" ><img\n        src="').concat(t(O),'"\n        alt="').concat(l,'"\n        width="33"\n        height="32"\n        class="store-icon"\n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="').concat(b,'"\n    target="_blank" class="icon-link"><img\n        src="').concat(t(M),'"\n        alt="').concat(p,'"\n        width="38"\n        height="36"\n        class="store-icon"\n    /></a>\n  </li>\n</ul>\n  </div>');return U.dataset.id="".concat(n),_}R.addEventListener("click",(function(t){return W.apply(this,arguments)})),V.addEventListener("click",B.openSignUpFunc),U.addEventListener("click",(function(t){return I.apply(this,arguments)})),N.addEventListener("click",(function(t){t.target.classList.contains("backdrop")&&N.classList.add("backdrop--hidden")})),window.addEventListener("keydown",(function(t){"Escape"===t.code&&N.classList.add("backdrop--hidden")})),s("95ECi"),s("jCI1E"),s("llppj"),s("ghnK3")}();
//# sourceMappingURL=index.8ead24c2.js.map
