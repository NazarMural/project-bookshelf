function o(o){return o&&o.__esModule?o.default:o}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},s={},n=t.parcelRequire0a78;null==n&&((n=function(o){if(o in e)return e[o].exports;if(o in s){var t=s[o];delete s[o];var n={id:o,exports:{}};return e[o]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(o,t){s[o]=t},t.parcelRequire0a78=n),n("kyEFX").register(JSON.parse('{"5ZPII":"index.ab40dd32.js","auE1R":"amazonLogo.65e47238.png","8kXNz":"bookLogo.22ccf33c.png","hSDsI":"bookShopLogo.082e3bff.png","5UbS1":"index.446be6ed.css","7wQtW":"index.9a30484d.js"}'));async function a(o){const t=await fetch(`https://books-backend.p.goit.global/books/${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}async function i(o){const t=await fetch(`https://books-backend.p.goit.global/books/category?category=${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}var c=n("7Y9D8");function r(){o(c).Loading.hourglass({clickToClose:!0,svgColor:"#4F2EE8"})}function l(){o(c).Loading.remove()}const d=document.querySelector(".list-categories"),u=document.querySelector(".books-cards__list");function b(){const o=document.querySelector(".books-cards__title");o&&o.remove(),function(){document.querySelectorAll(".category__link").forEach((o=>{o.classList.remove("current-category")}));const o=document.querySelector(".category__link-all");o.classList.contains("current-category")&&o.classList.remove("current-category")}(),u.innerHTML=""}function g(o){const t=o.split(" "),e=t.pop(t[t.length-1]),s=`<h1 class="books-cards__title">${t.join(" ")}\n        <span class="books-cards__title-accent"> ${e}</span></h1>`;u.insertAdjacentHTML("beforebegin",s)}function k(o){const t=o.map((o=>{const{_id:t,book_image:e,title:s,author:n}=o;return`\n    <li data-id="${t}" class="category-books__item">\n    <a href="" class="category-books__link">\n    <div class="category-books__img-thumb">\n    <img src="${e}" alt="${s}" class="category-books__img">\n    <p class="card-overlay">Quick view</p>\n    </div>\n    <h2 class="category-books__title">${s}</h2>\n    <p class="category-books__author">${n}</p>\n    </a>\n    </li>`})).join("");u.insertAdjacentHTML("beforeend",t)}d.addEventListener("click",(async function(o){u.classList.remove("top-books-list"),u.classList.add("category-books-list"),o.preventDefault(),o.target.classList.contains("category__link-all")&&(b(),o.target.classList.add("current-category"),f());if(o.target.classList.contains("category__link")){r(),b();const t=o.target.textContent;o.target.classList.add("current-category"),g(t);k(await i(t)),l()}}));function _(){window.scrollTo({top:0,behavior:"smooth"})}function p(o){const t=document.querySelectorAll(".js-cat-link");console.log(t),[...t].forEach((t=>{t.textContent===o?t.classList.add("current-category"):t.classList.contains("current-category")&&t.classList.remove("current-category")}))}({btnToTop:document.querySelector(".button-up")}).btnToTop.addEventListener("click",(()=>{_()}));const m={booksCardsList:document.querySelector(".books-cards__list"),booksCardsTitle:null,topBooksCategories:null,booksCardsButton:null};function f(){r(),a("top-books").then((o=>{console.log(m.booksCardsList),m.booksCardsList.classList.remove("category-books-list"),m.booksCardsList.classList.add("top-books-list"),m.booksCardsList.innerHTML="",g("Best Sellers Books"),function(o){const t=o.map((({list_name:o})=>`\n    <li class="top-books__item">\n    <h2 class="top-books-title">${o}</h2>\n    <ul class="top-books-categories__list">\n                \n    </ul>\n    <div class="top-books__button-box">\n    <button class="top-books__button" data-list_name="${o}">See More</button>\n    </div>\n    </li>\n    `)).join("");m.booksCardsList.insertAdjacentHTML("beforeend",t)}(o),m.topBooksCategories=document.querySelectorAll(".top-books-categories__list"),m.booksCardsButton=document.querySelector(".top-books__button"),function(o){let t=0;console.log(o[t].books),m.topBooksCategories.forEach((e=>{const s=o[t].books.map((({_id:o,book_image:t,title:e,author:s})=>`\n          <li data-id="${o}" class="category-books__item is-hidden-books">\n          <a href="" class="category-books__link">\n          <div class="category-books__img-thumb">\n          <img src="${t}" alt="${e}" class="category-books__img">\n          <p class="card-overlay">Quick view</p>\n          </div>\n          <h2 class="category-books__title">${e}</h2>\n          <p class="category-books__author">${s}</p>\n          </a>\n          </li>`)).join("");e.insertAdjacentHTML("beforeend",s),t++}))}(o),l()})).catch((()=>{console.log("Проблема з запитом!")}))}m.booksCardsList.addEventListener("click",(async function(o){if(o.preventDefault(),!o.target.classList.contains("top-books__button"))return void console.log("Ти натиснув не на кнопку.");console.log("Ти натиснув на кнопку."),m.booksCardsList.classList.remove("top-books-list"),m.booksCardsList.classList.add("category-books-list");const t=o.target.dataset.list_name;console.log(t),m.booksCardsTitle=document.querySelector(".books-cards__title"),m.booksCardsTitle.remove(),p(t),g(t),m.booksCardsList.innerHTML="",r();const e=await i(t);l(),_(),k(e)})),f();const h=document.querySelector(".list-categories");h.insertAdjacentHTML("afterbegin",'<li><a href="./index.html" class="js-cat-link category__link-all current-category">All category</a></li>'),async function(){const o=await a("category-list"),t=[];for(const{list_name:e}of o)t.push(e);console.log(t);const e=t.sort(((o,t)=>o.localeCompare(t))).map((o=>`<li class="category__item"><a href="" class="js-cat-link category__link">${o}</a></li>`)).join("");h.insertAdjacentHTML("beforeend",e)}(),n("dTazW");var y,L=n("d2gfz");y=new URL(n("kyEFX").resolve("auE1R"),import.meta.url).toString();var v;v=new URL(n("kyEFX").resolve("8kXNz"),import.meta.url).toString();var S;S=new URL(n("kyEFX").resolve("hSDsI"),import.meta.url).toString();const w=document.querySelector(".books-cards__list"),E=document.querySelector(".backdrop"),$=document.querySelector(".close-btn"),C=document.querySelector(".book-container"),H=document.querySelector(".modal__btn"),T=document.querySelector(".modal-book-btn__signUp"),q=document.querySelector(".information-about-status");function A(){E.classList.add("backdrop--hidden"),C.innerHTML=""}w.addEventListener("click",(async function(t){let e=!0;if("DIV"===t.target.nodeName||"P"===t.target.nodeName||"H2"===t.target.nodeName||"A"===t.target.nodeName){C.innerHTML="",$.addEventListener("click",A);const s=t.target.closest(".category-books__item").dataset.id;E.classList.remove("backdrop--hidden");const n=await a(s);console.log(n.buy_links),C.insertAdjacentHTML("beforeend",function({_id:t,book_image:e,buy_links:[{name:s,url:n},{name:a,url:i},{name:c,url:r}],title:l,description:d,author:u}){const b=`<img src="${e}" alt="${l}"  class="book-cover"/>\n  <div class="text-container"><h2 class="book-cover__title">${l}</h2>\n  <p class="book-cover__author">${u}</p>\n  <p class="book-cover__description">${d||"No description"}</p>\n  <ul class="store-icons">\n  <li class="store-icons__item">\n    <a href="${n}"\n      ><img\n        src="${o(y)}"\n        alt="${s}"\n        width="62"\n        height="19"\n        class="store-icon"\n        target="_blank" \n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="${i}" target="_blank" \n      ><img\n        src="${o(v)}"\n        alt="${a}"\n        width="33"\n        height="32"\n        class="store-icon"\n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="${r}"\n    target="_blank"><img\n        src="${o(S)}"\n        alt="${c}"\n        width="38"\n        height="36"\n        class="store-icon"\n    /></a>\n  </li>\n</ul>\n  </div>`;return H.dataset.id=`${t}`,b}(n));const i=await(0,L.getBook)();if(null!==i)for(let o=0;o<i.length;o++)if(i[o]._id===s){e=!1;break}e?(H.textContent="Add to shopping list",q.classList.add("is-hidden")):(H.textContent="Remove from the shopping list",q.classList.remove("is-hidden"))}})),T.addEventListener("click",L.openSignUpFunc),H.addEventListener("click",(async function(o){let t=!0;const e=await(0,L.getBook)(),s=H.dataset.id,n=await a(s);if(null!==e)for(let o=0;o<e.length;o++)if(e[o]._id===s){t=!1;break}t?((0,L.postBook)(n),H.textContent="Remove from the shopping list",q.classList.remove("is-hidden")):((0,L.deleteBook)(s),H.textContent="Add to shopping list",q.classList.add("is-hidden"))})),E.addEventListener("click",(function(o){o.target.classList.contains("backdrop")&&E.classList.add("backdrop--hidden")})),window.addEventListener("keydown",(function({code:o}){"Escape"===o&&E.classList.add("backdrop--hidden")})),n("d2gfz"),n("4QsFx"),n("hgxEb");
//# sourceMappingURL=index.ab40dd32.js.map
