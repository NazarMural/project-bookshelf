async function o(o){const t=await fetch(`https://books-backend.p.goit.global/books/${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}async function t(o){const t=await fetch(`https://books-backend.p.goit.global/books/category?category=${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}const s=document.querySelector(".list-categories"),e=document.querySelector(".books-cards__list");function n(){document.querySelector(".books-cards__title").remove(),function(){document.querySelectorAll(".category__link").forEach((o=>{o.classList.remove("current-category")}));const o=document.querySelector(".category__link-all");o.classList.contains("current-category")&&o.classList.remove("current-category")}(),e.innerHTML=""}function a(o){const t=o.split(" "),s=t.pop(t[t.length-1]),n=`<h1 class="books-cards__title">${t.join(" ")}\n        <span class="books-cards__title-accent"> ${s}</span></h1>`;e.insertAdjacentHTML("beforebegin",n)}function c(o){const t=o.map((o=>{const{_id:t,book_image:s,title:e,author:n}=o;return`\n    <li data-id="${t}" class="category-books__item">\n    <a href="" class="category-books__link">\n    <div class="category-books__img-thumb">\n    <img src="${s}" alt="${e}" class="category-books__img">\n    <p class="card-overlay">Quick view</p>\n    </div>\n    <h2 class="category-books__title">${e}</h2>\n    <p class="category-books__author">${n}</p>\n    </a>\n    </li>`})).join("");e.insertAdjacentHTML("beforeend",t)}s.addEventListener("click",(async function(o){e.classList.remove("top-books-list"),e.classList.add("category-books-list"),o.preventDefault(),o.target.classList.contains("category__link-all")&&(n(),o.target.classList.add("current-category"),i());if(o.target.classList.contains("category__link")){n();const s=o.target.textContent;o.target.classList.add("current-category"),a(s);c(await t(s))}}));const r={booksCardsList:document.querySelector(".books-cards__list"),booksCardsTitle:null,topBooksCategories:null,booksCardsButton:null};function i(){o("top-books").then((o=>{console.log(r.booksCardsList),r.booksCardsList.classList.remove("category-books-list"),r.booksCardsList.classList.add("top-books-list"),r.booksCardsList.innerHTML="",a("Best Sellers Books"),function(o){const t=o.map((({list_name:o})=>`\n    <li class="top-books__item">\n    <h2 class="top-books-title">${o}</h2>\n    <ul class="top-books-categories__list">\n                \n    </ul>\n    <div class="top-books__button-box">\n    <button class="top-books__button" data-list_name="${o}">See More</button>\n    </div>\n    </li>\n    `)).join("");r.booksCardsList.insertAdjacentHTML("beforeend",t)}(o),r.topBooksCategories=document.querySelectorAll(".top-books-categories__list"),r.booksCardsButton=document.querySelector(".top-books__button"),function(o){let t=0;console.log(o[t].books),r.topBooksCategories.forEach((s=>{const e=o[t].books.map((({_id:o,book_image:t,title:s,author:e})=>`\n          <li data-id="${o}" class="category-books__item is-hidden-books">\n          <a href="" class="category-books__link">\n          <div class="category-books__img-thumb">\n          <img src="${t}" alt="${s}" class="category-books__img">\n          <p class="card-overlay">Quick view</p>\n          </div>\n          <h2 class="category-books__title">${s}</h2>\n          <p class="category-books__author">${e}</p>\n          </a>\n          </li>`)).join("");s.insertAdjacentHTML("beforeend",e),t++}))}(o)})).catch((()=>{console.log("Проблема з запитом!")}))}r.booksCardsList.addEventListener("click",(async function(o){if(o.preventDefault(),!o.target.classList.contains("top-books__button"))return void console.log("Ти натиснув не на кнопку.");console.log("Ти натиснув на кнопку."),r.booksCardsList.classList.remove("top-books-list"),r.booksCardsList.classList.add("category-books-list");const s=o.target.dataset.list_name;console.log(s),r.booksCardsTitle=document.querySelector(".books-cards__title"),r.booksCardsTitle.remove(),a(s),r.booksCardsList.innerHTML="";c(await t(s))})),i();const l=document.querySelector(".list-categories");l.insertAdjacentHTML("afterbegin",'<li><a href="./index.html" class="category__link-all">All category</a></li>'),async function(){const t=await o("category-list"),s=[];for(const{list_name:o}of t)s.push(o);console.log(s);const e=s.sort(((o,t)=>o.localeCompare(t))).map((o=>`<li class="category__item"><a href="" class="category__link">${o}</a></li>`)).join("");l.insertAdjacentHTML("beforeend",e)}();const d=document.querySelector(".books-cards__list"),b=document.querySelector(".backdrop--hidden"),k=document.querySelector(".close-btn"),u=document.querySelector(".book-container");function _(){b.classList.add("backdrop--hidden"),u.innerHTML=""}d.addEventListener("click",(async function(t){if("IMG"===t.target.nodeName){k.addEventListener("click",_);const s=t.target.closest(".category-books__item").dataset.id;b.classList.remove("backdrop--hidden");const e=await o(s);console.log(e),u.insertAdjacentHTML("beforeend",function({book_image:o,buy_links:t,title:s,description:e,author:n}){return`<img src="${o}" alt="${s}" />\n  <h2>${s}</h2>\n  <p>${n}</p>\n  <p>${e}</p>\n  <svg width="10" height="10"><use href="${t}"></use></svg>`}(e))}}));
//# sourceMappingURL=index.ab9c3991.js.map
