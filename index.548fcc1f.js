function t(t){return t&&t.__esModule?t.default:t}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},s={},n=o.parcelRequire0a78;null==n&&((n=function(t){if(t in e)return e[t].exports;if(t in s){var o=s[t];delete s[t];var n={id:t,exports:{}};return e[t]=n,o.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,o){s[t]=o},o.parcelRequire0a78=n),n("kyEFX").register(JSON.parse('{"5ZPII":"index.548fcc1f.js","auE1R":"amazonLogo.65e47238.png","8kXNz":"bookLogo.22ccf33c.png","hSDsI":"bookShopLogo.082e3bff.png","5UbS1":"index.033dfd3c.css","7wQtW":"index.4309df98.js"}'));async function a(t){const o=await fetch(`https://books-backend.p.goit.global/books/${t}`);if(!o.ok)throw new Error(o.status);return await o.json()}async function i(t){const o=await fetch(`https://books-backend.p.goit.global/books/category?category=${t}`);if(!o.ok)throw new Error(o.status);return await o.json()}var c=n("7Y9D8");function r(){t(c).Loading.hourglass({clickToClose:!0,svgColor:"#4F2EE8"})}function l(){t(c).Loading.remove()}function d(){document.getElementById("category-section").scrollIntoView({behavior:"smooth",block:"start"})}const u=document.querySelector(".list-categories"),b=document.querySelector(".books-cards__list");function k(){const t=document.querySelector(".books-cards__title");t&&t.remove(),function(){document.querySelectorAll(".category__link").forEach((t=>{t.classList.remove("current-category")}));const t=document.querySelector(".category__link-all");t.classList.contains("current-category")&&t.classList.remove("current-category")}(),b.innerHTML=""}function g(t){const o=t.split(" "),e=o.pop(o[o.length-1]),s=`<h1 class="books-cards__title">${o.join(" ")}\n        <span class="books-cards__title-accent"> ${e}</span></h1>`;b.insertAdjacentHTML("beforebegin",s)}function _(t){const o=t.map((t=>{const{_id:o,book_image:e,title:s,author:n}=t;return`\n    <li data-id="${o}" class="category-books__item">\n    <a href="" class="category-books__link">\n    <div class="category-books__img-thumb">\n    <img src="${e}" alt="${s}" class="category-books__img">\n    <p class="card-overlay">Quick view</p>\n    </div>\n    <h2 class="category-books__title">${s}</h2>\n    <p class="category-books__author">${n}</p>\n    </a>\n    </li>`})).join("");b.insertAdjacentHTML("beforeend",o)}u.addEventListener("click",(async function(t){b.classList.remove("top-books-list"),b.classList.add("category-books-list"),t.preventDefault(),t.target.classList.contains("category__link-all")&&(k(),t.target.classList.add("current-category"),f(),d());if(t.target.classList.contains("category__link")){r(),k();const o=t.target.textContent;t.target.classList.add("current-category"),g(o);_(await i(o)),l(),d()}}));const m={btnToTop:document.querySelector(".button-up__box")};function p(){window.scrollTo({top:0,behavior:"smooth"})}m.btnToTop.addEventListener("click",(()=>{p()})),window.addEventListener("scroll",(()=>{window.pageYOffset>0?m.btnToTop.classList.remove("is-hidden"):m.btnToTop.classList.add("is-hidden")}));const y={booksCardsList:document.querySelector(".books-cards__list"),booksCardsTitle:null,topBooksCategories:null,booksCardsButton:null};function f(){r(),a("top-books").then((t=>{y.booksCardsList.classList.remove("category-books-list"),y.booksCardsList.classList.add("top-books-list"),y.booksCardsList.innerHTML="",g("Best Sellers Books"),function(t){const o=t.map((({list_name:t})=>`\n    <li class="top-books__item">\n    <h2 class="top-books-title">${t}</h2>\n    <ul class="top-books-categories__list">\n                \n    </ul>\n    <div class="top-books__button-box">\n    <button class="top-books__button" data-list_name="${t}">See More</button>\n    </div>\n    </li>\n    `)).join("");y.booksCardsList.insertAdjacentHTML("beforeend",o)}(t),y.topBooksCategories=document.querySelectorAll(".top-books-categories__list"),y.booksCardsButton=document.querySelector(".top-books__button"),function(t){let o=0;y.topBooksCategories.forEach((e=>{const s=t[o].books.map((({_id:t,book_image:o,title:e,author:s})=>`\n          <li data-id="${t}" class="category-books__item is-hidden-books">\n          <a href="" class="category-books__link">\n          <div class="category-books__img-thumb">\n          <img src="${o}" alt="${e}" loading="lazy" class="category-books__img">\n          <p class="card-overlay">Quick view</p>\n          </div>\n          <h2 class="category-books__title">${e}</h2>\n          <p class="category-books__author">${s}</p>\n          </a>\n          </li>`)).join("");e.insertAdjacentHTML("beforeend",s),o++}))}(t),l()})).catch((()=>{console.log("Проблема з запитом!")}))}y.booksCardsList.addEventListener("click",(async function(t){if(t.preventDefault(),!t.target.classList.contains("top-books__button"))return;y.booksCardsList.classList.remove("top-books-list"),y.booksCardsList.classList.add("category-books-list");const o=t.target.dataset.list_name;y.booksCardsTitle=document.querySelector(".books-cards__title"),y.booksCardsTitle.remove(),e=o,[...document.querySelectorAll(".js-cat-link")].forEach((t=>{t.textContent===e?t.classList.add("current-category"):t.classList.contains("current-category")&&t.classList.remove("current-category")})),g(o),y.booksCardsList.innerHTML="",r();var e;const s=await i(o);l(),p(),_(s)})),f();const h=document.querySelector(".list-categories");h.insertAdjacentHTML("afterbegin",'<li><a href="#category-title" class="js-cat-link category__link-all current-category">All category</a></li>'),async function(){const t=await a("category-list"),o=[];for(const{list_name:e}of t)o.push(e);const e=o.sort(((t,o)=>t.localeCompare(o))).map((t=>`<li class="category__item"><a href="#category-title" class="js-cat-link category__link">${t}</a></li>`)).join("");h.insertAdjacentHTML("beforeend",e)}(),n("dTazW");var L,v=n("d2gfz");L=new URL(n("kyEFX").resolve("auE1R"),import.meta.url).toString();var w;w=new URL(n("kyEFX").resolve("8kXNz"),import.meta.url).toString();var E;E=new URL(n("kyEFX").resolve("hSDsI"),import.meta.url).toString();const S=document.querySelector(".books-cards__list"),$=document.querySelector(".backdrop"),T=document.querySelector(".close-btn"),C=document.querySelector(".book-container"),H=document.querySelector(".modal__btn"),q=document.querySelector(".modal-book-btn__signUp"),A=document.querySelector(".information-about-status"),j=document.body;function x(){$.classList.add("backdrop--hidden"),j.classList.remove("modal-open")}function R(t){t.target.classList.contains("backdrop")&&($.removeEventListener("click",R),$.classList.add("backdrop--hidden"),j.classList.remove("modal-open"))}function F({code:t}){"Escape"===t&&(window.removeEventListener("keydown",F),$.classList.add("backdrop--hidden"),j.classList.remove("modal-open"))}S.addEventListener("click",(async function(o){let e=!0;if("DIV"===o.target.nodeName||"P"===o.target.nodeName||"H2"===o.target.nodeName||"A"===o.target.nodeName){C.innerHTML="",T.addEventListener("click",x),$.addEventListener("click",R),window.addEventListener("keydown",F);const s=o.target.closest(".category-books__item").dataset.id;$.classList.remove("backdrop--hidden"),j.classList.add("modal-open");const n=await a(s);console.log(n.buy_links),C.insertAdjacentHTML("beforeend",function({_id:o,book_image:e,buy_links:[{name:s,url:n},{name:a,url:i},{name:c,url:r}],title:l,description:d,author:u}){const b=`<img src="${e}" alt="${l}"  class="book-cover"/>\n  <div class="text-container"><h2 class="book-cover__title">${l}</h2>\n  <p class="book-cover__author">${u}</p>\n  <p class="book-cover__description">${d||"No description"}</p>\n  <ul class="store-icons">\n  <li class="store-icons__item">\n    <a href="${n}"\n    target="_blank" \n      class="icon-link"><img\n        src="${t(L)}"\n        alt="${s}"\n        width="62"\n        height="19"\n        class="store-icon--amazon"\n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="${i}" target="_blank" \n    class="icon-link" ><img\n        src="${t(w)}"\n        alt="${a}"\n        width="33"\n        height="32"\n        class="store-icon"\n    /></a>\n  </li>\n  <li class="store-icons__item">\n    <a href="${r}"\n    target="_blank" class="icon-link"><img\n        src="${t(E)}"\n        alt="${c}"\n        width="38"\n        height="36"\n        class="store-icon"\n    /></a>\n  </li>\n</ul>\n  </div>`;return H.dataset.id=`${o}`,b}(n));const i=await(0,v.getBook)();if(null!==i)for(let t=0;t<i.length;t++)if(i[t]._id===s){e=!1;break}e?(H.textContent="Add to shopping list",A.classList.add("is-hidden")):(H.textContent="Remove from the shopping list",A.classList.remove("is-hidden"))}})),q.addEventListener("click",v.openSignUpFunc),H.addEventListener("click",(async function(t){let o=!0;const e=await(0,v.getBook)(),s=H.dataset.id,n=await a(s);if(null!==e)for(let t=0;t<e.length;t++)if(e[t]._id===s){o=!1;break}o?((0,v.postBook)(n),H.textContent="Remove from the shopping list",A.classList.remove("is-hidden")):((0,v.deleteBook)(s),H.textContent="Add to shopping list",A.classList.add("is-hidden"))})),n("d2gfz"),n("4QsFx"),n("hgxEb"),n("baGT8");
//# sourceMappingURL=index.548fcc1f.js.map
