function o(o){return o&&o.__esModule?o.default:o}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},s={},n=t.parcelRequire0a78;null==n&&((n=function(o){if(o in e)return e[o].exports;if(o in s){var t=s[o];delete s[o];var n={id:o,exports:{}};return e[o]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(o,t){s[o]=t},t.parcelRequire0a78=n);async function a(o){const t=await fetch(`https://books-backend.p.goit.global/books/${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}async function c(o){const t=await fetch(`https://books-backend.p.goit.global/books/category?category=${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}var r=n("7Y9D8");function i(){o(r).Loading.hourglass({clickToClose:!0,svgColor:"#4F2EE8"})}function l(){o(r).Loading.remove()}const d=document.querySelector(".list-categories"),u=document.querySelector(".books-cards__list");function g(){const o=document.querySelector(".books-cards__title");o&&o.remove(),function(){document.querySelectorAll(".category__link").forEach((o=>{o.classList.remove("current-category")}));const o=document.querySelector(".category__link-all");o.classList.contains("current-category")&&o.classList.remove("current-category")}(),u.innerHTML=""}function b(o){const t=o.split(" "),e=t.pop(t[t.length-1]),s=`<h1 class="books-cards__title">${t.join(" ")}\n        <span class="books-cards__title-accent"> ${e}</span></h1>`;u.insertAdjacentHTML("beforebegin",s)}function k(o){const t=o.map((o=>{const{_id:t,book_image:e,title:s,author:n}=o;return`\n    <li data-id="${t}" class="category-books__item">\n    <a href="" class="category-books__link">\n    <div class="category-books__img-thumb">\n    <img src="${e}" alt="${s}" class="category-books__img">\n    <p class="card-overlay">Quick view</p>\n    </div>\n    <h2 class="category-books__title">${s}</h2>\n    <p class="category-books__author">${n}</p>\n    </a>\n    </li>`})).join("");u.insertAdjacentHTML("beforeend",t)}d.addEventListener("click",(async function(o){u.classList.remove("top-books-list"),u.classList.add("category-books-list"),o.preventDefault(),o.target.classList.contains("category__link-all")&&(g(),o.target.classList.add("current-category"),y());if(o.target.classList.contains("category__link")){i(),g();const t=o.target.textContent;o.target.classList.add("current-category"),b(t);k(await c(t)),l()}}));function _(){window.scrollTo({top:0,behavior:"smooth"})}function p(o){const t=document.querySelectorAll(".js-cat-link");console.log(t),[...t].forEach((t=>{t.textContent===o?t.classList.add("current-category"):t.classList.contains("current-category")&&t.classList.remove("current-category")}))}({btnToTop:document.querySelector(".button-up")}).btnToTop.addEventListener("click",(()=>{_()}));const f={booksCardsList:document.querySelector(".books-cards__list"),booksCardsTitle:null,topBooksCategories:null,booksCardsButton:null};function y(){i(),a("top-books").then((o=>{console.log(f.booksCardsList),f.booksCardsList.classList.remove("category-books-list"),f.booksCardsList.classList.add("top-books-list"),f.booksCardsList.innerHTML="",b("Best Sellers Books"),function(o){const t=o.map((({list_name:o})=>`\n    <li class="top-books__item">\n    <h2 class="top-books-title">${o}</h2>\n    <ul class="top-books-categories__list">\n                \n    </ul>\n    <div class="top-books__button-box">\n    <button class="top-books__button" data-list_name="${o}">See More</button>\n    </div>\n    </li>\n    `)).join("");f.booksCardsList.insertAdjacentHTML("beforeend",t)}(o),f.topBooksCategories=document.querySelectorAll(".top-books-categories__list"),f.booksCardsButton=document.querySelector(".top-books__button"),function(o){let t=0;console.log(o[t].books),f.topBooksCategories.forEach((e=>{const s=o[t].books.map((({_id:o,book_image:t,title:e,author:s})=>`\n          <li data-id="${o}" class="category-books__item is-hidden-books">\n          <a href="" class="category-books__link">\n          <div class="category-books__img-thumb">\n          <img src="${t}" alt="${e}" class="category-books__img">\n          <p class="card-overlay">Quick view</p>\n          </div>\n          <h2 class="category-books__title">${e}</h2>\n          <p class="category-books__author">${s}</p>\n          </a>\n          </li>`)).join("");e.insertAdjacentHTML("beforeend",s),t++}))}(o),l()})).catch((()=>{console.log("Проблема з запитом!")}))}f.booksCardsList.addEventListener("click",(async function(o){if(o.preventDefault(),!o.target.classList.contains("top-books__button"))return void console.log("Ти натиснув не на кнопку.");console.log("Ти натиснув на кнопку."),f.booksCardsList.classList.remove("top-books-list"),f.booksCardsList.classList.add("category-books-list");const t=o.target.dataset.list_name;console.log(t),f.booksCardsTitle=document.querySelector(".books-cards__title"),f.booksCardsTitle.remove(),p(t),b(t),f.booksCardsList.innerHTML="",i();const e=await c(t);l(),_(),k(e)})),y();const m=document.querySelector(".list-categories");m.insertAdjacentHTML("afterbegin",'<li><a href="./index.html" class="js-cat-link category__link-all current-category">All category</a></li>'),async function(){const o=await a("category-list"),t=[];for(const{list_name:e}of o)t.push(e);console.log(t);const e=t.sort(((o,t)=>o.localeCompare(t))).map((o=>`<li class="category__item"><a href="" class="js-cat-link category__link">${o}</a></li>`)).join("");m.insertAdjacentHTML("beforeend",e)}(),n("dTazW");var h=n("d2gfz");const L=document.querySelector(".books-cards__list"),v=document.querySelector(".backdrop--hidden"),C=document.querySelector(".close-btn"),w=document.querySelector(".book-container"),T=document.querySelector(".modal__btn"),$=document.querySelector(".modal-book-btn__signUp");function S(){v.classList.add("backdrop--hidden"),w.innerHTML=""}L.addEventListener("click",(async function(o){let t=!0;if("DIV"===o.target.nodeName||"P"===o.target.nodeName||"H2"===o.target.nodeName||"A"===o.target.nodeName){C.addEventListener("click",S);const e=o.target.closest(".category-books__item").dataset.id;v.classList.remove("backdrop--hidden");const s=await a(e);w.insertAdjacentHTML("beforeend",function({_id:o,book_image:t,buy_links:e,title:s,description:n,author:a}){const c=`<img src="${t}" alt="${s}" />\n  <h2>${s}</h2>\n  <p>${a}</p>\n  <p>${n}</p>\n  <svg width="10" height="10"><use href="${e}"></use></svg>`;return T.dataset.id=`${o}`,c}(s));const n=await(0,h.getBook)();if(null!==n)for(let o=0;o<n.length;o++)if(n[o]._id===e){t=!1;break}T.textContent=t?"Add to shopping list":"Remove from the shopping list"}})),$.addEventListener("click",h.openSignUpFunc),T.addEventListener("click",(async function(o){let t=!0;const e=await(0,h.getBook)(),s=T.dataset.id,n=await a(s);if(null!==e)for(let o=0;o<e.length;o++)if(e[o]._id===s){t=!1;break}t?((0,h.postBook)(n),T.textContent="Remove from the shopping list"):((0,h.deleteBook)(s),T.textContent="Add to shopping list")})),n("d2gfz"),n("4QsFx"),n("hgxEb");
//# sourceMappingURL=index.0c379457.js.map
