{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,0dCAzDH,EAAA,SCAA,I,EAAAI,EAAAJ,EAAA,SCAAK,EAAiB,IAAAC,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FE,EAAiB,IAAAP,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FG,EAAiB,IAAAR,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FI,EAAiB,IAAAT,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FK,EAAiB,IAAAV,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WNC5F,MAAMM,EAASC,SAASC,cAAc,iBAChCC,EAAkBF,SAASC,cAAc,mBAoC/C,SAASE,EAAyBC,GAChC,OAAOA,EACJC,KACC,EAACC,IACCA,EAAGC,WACHA,EAAUC,MACVA,EAAKC,YACLA,EAAWC,OACXA,EAAMC,UACNA,EACAC,YACIC,KAAMC,EAAOtB,IAAKuB,IAClBF,KAAMG,EAAOxB,IAAKyB,IAClBJ,KAAMK,EAAO1B,IAAK2B,OAGtB,yJAGkCZ,WAAoBC,qLAMpBA,sDACGG,4EAEKL,2CAC1Bc,EAAAtB,YAA0BU,mLAKpCC,GAAe,+IAKSC,sEAEjBK,yGAGAK,EAAAzB,2BACAmB,0DAGAG,yEAC+BG,EAAAxB,YAAkBoB,4CAEjDG,kGAGAC,EAAAvB,2BACAqB,kGAShBG,KAAK,G,EAvFVC,iBACE,IAAIlB,QAAa,EAAAlB,EAAAqC,WACjB,GAAa,OAATnB,EAAe,CACjB,MAAMoB,QAAerB,EAAyBC,GAC9CL,EAAO0B,mBAAmB,YAAaD,GACvCtB,EAAgBuB,mBAAmB,aAAcC,E,MAEjD3B,EAAO0B,mBAAmB,YAAaE,E,CAV3CC,GA8FA,MAAMD,EAAY,gUASAP,EAAAjC,UAAciC,EAAA1B,wBACjB0B,EAAAjC,sGAOTuC,EAAW,uGAKjB1B,SAAS6B,iBAAiB,SAAS,SAAUC,GAC3C,MAAMC,EAAYD,EAAEE,OAAOC,QAAQ,kBACnC,GAAIF,EAAW,EAvGjBT,eAA0BY,IACxB,EAAAhD,EAAAiD,YAAWD,GACX,IAAI9B,QAAa,EAAAlB,EAAAqC,WACjB,GAAa,OAATnB,EAAe,CACjB,MAAMoB,QAAerB,EAAyBC,GAC9CL,EAAOqC,UAAYZ,C,MAEnBtB,EAAgBkC,UAAYT,C,CAkG5BU,CADaN,EAAUO,QAAQ3D,G","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-f37f33628af89cbe.js","src/shopingListPage.js","src/js/getDataFromShoppingList.js","node_modules/@parcel/runtime-js/lib/runtime-5abb6cfe2f36960f.js","node_modules/@parcel/runtime-js/lib/runtime-323003c8bb113a66.js","node_modules/@parcel/runtime-js/lib/runtime-7359f1e63e8c2f2d.js","node_modules/@parcel/runtime-js/lib/runtime-f1a38485ac5d6a40.js","node_modules/@parcel/runtime-js/lib/runtime-dea986a9483f5edd.js","node_modules/@parcel/runtime-js/lib/runtime-381e1ac529f7ca81.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1jS2v\\\":\\\"shoppingListPage.831642ed.js\\\",\\\"aYLzl\\\":\\\"shopingListBg.4abada78.png\\\",\\\"3Rb7F\\\":\\\"shopingListBg@2x.1ae65425.png\\\",\\\"auE1R\\\":\\\"amazonLogo.65e47238.png\\\",\\\"8kXNz\\\":\\\"bookLogo.22ccf33c.png\\\",\\\"hSDsI\\\":\\\"bookShopLogo.082e3bff.png\\\",\\\"lK9xZ\\\":\\\"deleteButtonIcon.03365165.png\\\",\\\"5UbS1\\\":\\\"index.2ceb1eb6.css\\\",\\\"7wQtW\\\":\\\"index.b00b19ab.js\\\"}\"));","import './js/authentication';\nimport './js/getDataFromShoppingList';\nimport './js/switch';\nimport './js/mobile';\nimport './js/support';\n","import { postBook, deleteBook, getBook } from './authentication';\nconst mainUl = document.querySelector('.shopList__ul');\nconst markupContainer = document.querySelector('.shopList__list');\n\nimport photo1 from '../images/shopingListBg.png';\nimport photo2 from '../images/shopingListBg@2x.png';\nimport amazonLogo from '../images/amazonLogo.png';\nimport bookLogo from '../images/bookLogo.png';\nimport bookShopLogo from '../images/bookShopLogo.png';\nimport deleteButtonIcon from '../images/deleteButtonIcon.png';\n\n//create markup\ngetDataForMarkup();\n\n//validating data in the database\nasync function getDataForMarkup() {\n  let data = await getBook();\n  if (data !== null) {\n    const markup = await createShoppingListMarkup(data);\n    mainUl.insertAdjacentHTML('beforeend', markup);\n    markupContainer.insertAdjacentHTML('afterbegin', addTitle);\n  } else {\n    mainUl.insertAdjacentHTML('beforeend', noDataImg);\n  }\n}\n\n//remove book\nasync function removeBook(bookID) {\n  deleteBook(bookID);\n  let data = await getBook();\n  if (data !== null) {\n    const markup = await createShoppingListMarkup(data);\n    mainUl.innerHTML = markup;\n  } else {\n    markupContainer.innerHTML = noDataImg;\n  }\n}\n\nfunction createShoppingListMarkup(data) {\n  return data\n    .map(\n      ({\n        _id,\n        book_image,\n        title,\n        description,\n        author,\n        list_name,\n        buy_links: [\n          { name: name1, url: url1 },\n          { name: name2, url: url2 },\n          { name: name3, url: url3 },\n        ],\n      }) =>\n        `<li class=\"shopCard\">\n  <div class=\"shopCard__card-container\">\n    <div class=\"shopCard__photo-container\">\n      <img class=\"shopCard__photo\" src=\"${book_image}\" alt=\"${title}\" />\n    </div>\n    <div class=\"shopCard__box-description\">\n      <div>\n        <div class=\"shopCard__info-block\">\n          <div>\n            <h3 class=\"shopCard__title\">${title}</h3>\n            <p class=\"shopCard__list-name\">${list_name}</p>\n          </div>\n          <button class=\"shopCard__btn\" data-id=${_id} type=\"submit\">\n            <img src=\"${deleteButtonIcon}\" alt=\"${title}\" />\n          </button>\n        </div>\n        <div class=\"shopCard__description-container block-with-ellipsis\">\n          <p class=\"shopCard__description\">\n            ${description || 'No description'}\n          </p>\n        </div>\n      </div>\n      <div class=\"shopCard__boxAutor\">\n        <p class=\"shopCard__author\">${author}</p>\n        <div class=\"shopCard__urlList\">\n          <a href=\"${url1}\" target=\"_blank\"\n            ><img\n              class=\"shopCard__url-amazon\"\n              src=\"${amazonLogo}\"\n              alt=\"${name1}\"\n            />\n          </a>\n          <a href=\"${url2}\" target=\"_blank\"\n            ><img class=\"shopCard__url-book\" src=\"${bookLogo}\" alt=\"${name2}\"\n          /></a>\n          <a href=\"${url3}\" target=\"_blank\"\n            ><img\n              class=\"shopCard__url\"\n              src=\"${bookShopLogo}\"\n              alt=\"${name3}\"\n            />\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</li>`\n    )\n    .join('');\n}\n\n//if no data\nconst noDataImg = `<h1 class=\"shopList__title\">\n    Shopping <span class=\"shopList__accent\">List</span>\n  </h1>\n  <section class=\"shopList__section\">\n    <div class=\"shopList__imgContainer\">\n      <p class=\"shopList__text\">\n        This page is empty, add some books and proceed to order.\n      </p>\n      <img\n        srcset=\"${photo1} 1x, ${photo2} 2x\"\n        src=\"${photo1}\"\n        alt=\"shopping list\"\n        class=\"shopList__img\"\n      />\n    </div>\n  </section>`;\n\nconst addTitle = `<h1 class=\"shopList__titleMarkup\">\n    Shopping <span class=\"shopList__accent\">List</span>\n  </h1>`;\n\n//addEventListener after create markup\ndocument.addEventListener('click', function (e) {\n  const removeBtn = e.target.closest('.shopCard__btn');\n  if (removeBtn) {\n    let bookID = removeBtn.dataset.id;\n    removeBook(bookID);\n  }\n});\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"aYLzl\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3Rb7F\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"auE1R\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8kXNz\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hSDsI\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lK9xZ\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$d2gfz","$c377b5c99514f24a$exports","URL","resolve","import","meta","url","toString","$78701a387f773205$exports","$61bd20b8bc746b27$exports","$3a659fd30f3057ab$exports","$2ad1d7d577b48c3b$exports","$443379603781b620$exports","$1ee61bfde9053867$var$mainUl","document","querySelector","$1ee61bfde9053867$var$markupContainer","$1ee61bfde9053867$var$createShoppingListMarkup","data","map","_id","book_image","title","description","author","list_name","buy_links","name","name1","url1","name2","url2","name3","url3","$parcel$interopDefault","join","async","getBook","markup","insertAdjacentHTML","$1ee61bfde9053867$var$addTitle","$1ee61bfde9053867$var$noDataImg","$1ee61bfde9053867$var$getDataForMarkup","addEventListener","e","removeBtn","target","closest","bookID","deleteBook","innerHTML","$1ee61bfde9053867$var$removeBook","dataset"],"version":3,"file":"shoppingListPage.831642ed.js.map"}