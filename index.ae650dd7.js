async function o(o){const t=await fetch(`https://books-backend.p.goit.global/books/${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}async function t(o){const t=await fetch(`https://books-backend.p.goit.global/books/category?category=${o}`);if(!t.ok)throw new Error(t.status);return await t.json()}const s=document.querySelector(".list-categories"),e=document.querySelector(".books-cards__list"),a=document.querySelector(".books-cards__title");function n(o){const t=o.map((o=>{const{_id:t,book_image:s,title:e,author:a}=o;return`\n    <li data-id="${t}" class="category-books__item">\n    <img src="${s}" alt="${e}" class="category-books__img">\n    <h2 class="category-books__title">${e}</h2>\n    <p class="category-books__author">${a}</p>\n    </li>`})).join("");e.insertAdjacentHTML("beforeend",t)}s.addEventListener("click",(async function(o){if(e.classList.add("category-books-list"),o.preventDefault(),o.target.classList.contains("category__link")){document.querySelectorAll(".category__link").forEach((o=>{o.classList.remove("current-category")})),e.innerHTML="";const s=o.target.textContent;o.target.classList.add("current-category"),a.textContent=s;n(await t(s))}}));const c={booksCardsList:document.querySelector(".books-cards__list"),booksCardsTitle:document.querySelector(".books-cards__title"),topBooksCategories:null,booksCardsButton:null};c.booksCardsList.addEventListener("click",(async function(o){if(o.preventDefault(),!o.target.classList.contains("books-cards__button"))return void console.log("Ти натиснув не на кнопку.");console.log("Ти натиснув на кнопку."),c.booksCardsList.classList.add("category-books-list");const s=o.target.dataset.list_name;c.booksCardsTitle.textContent=s,c.booksCardsList.innerHTML="";n(await t(s))})),o("top-books").then((o=>{console.log(c.booksCardsList),c.booksCardsList.classList.remove("category-books-list"),c.booksCardsList.classList.add("top-books-list"),c.booksCardsList.innerHTML="",c.booksCardsTitle.textContent="Best Sellers Books",function(o){const t=o.map((({list_name:o})=>`\n    <li class="books-cards__item">\n    <h2 class="top-books-title">${o}</h2>\n    <ul class="top-books-categories">\n                \n    </ul>\n    <button class="books-cards__button" data-list_name="${o}">See More</button>\n    </li>\n    `)).join("");c.booksCardsList.insertAdjacentHTML("beforeend",t)}(o),c.topBooksCategories=document.querySelectorAll(".top-books-categories"),c.booksCardsButton=document.querySelector(".books-cards__button"),function(o){let t=0;console.log(o[t].books),c.topBooksCategories.forEach((s=>{const e=o[t].books.map((({book_image:o,title:t,author:s})=>`\n          <li>\n          <img src="${o}" alt="${t}">\n          <h2>${t}</h2>\n          <p>${s}</p>\n          </li>`)).join("");s.insertAdjacentHTML("beforeend",e),t++}))}(o)})).catch((()=>{console.log("Проблема з запитом!")}));const r=document.querySelector(".list-categories");r.insertAdjacentHTML("afterbegin",'<li><a href="./index.html" class="category__link-all">All category</a></li>'),async function(){const t=await o("category-list"),s=[];for(const{list_name:o}of t)s.push(o);console.log(s);const e=s.sort(((o,t)=>o.localeCompare(t))).map((o=>`<li class="category__item"><a href="" class="category__link">${o}</a></li>`)).join("");r.insertAdjacentHTML("beforeend",e)}();
//# sourceMappingURL=index.ae650dd7.js.map
